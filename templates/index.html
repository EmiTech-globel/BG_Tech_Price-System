<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNC/Laser Cutting Price Quote System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CNC/Laser Cutting Price Quote</h1>
            <p>AI-Powered Pricing System</p>
        </div>
        
    <div class="tabs">
        <div class="tab active" onclick="showTab('upload')">
            üì§ Upload Design
        </div>
        <div class="tab" onclick="showTab('manual')">
            ‚úçÔ∏è Manual Entry
        </div>
        <div class="tab" onclick="showTab('quotes')">
            üìã Saved Quotes
        </div>
    </div>
        
        <div class="content">
            <!-- UPLOAD TAB -->
            <div id="upload" class="tab-content active">
                <div class="info-box">
                    <strong>üìã How it works:</strong> Upload your SVG file and we'll automatically extract dimensions, shapes, and complexity. You just need to specify material and thickness!
                </div>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üìÅ</div>
                    <h2>Drop your SVG file here</h2>
                    <p style="margin-top: 10px; opacity: 0.7;">or click to browse</p>
                    <p style="margin-top: 5px; font-size: 0.9em; opacity: 0.6;">Supported: SVG files only</p>
                    <input type="file" id="fileInput" accept=".svg" style="display: none;">
                </div>
                
                <div class="loading" id="uploadLoading">
                    <div class="spinner"></div>
                    <p style="margin-top: 15px;">Analyzing file...</p>
                </div>
                
                <div class="file-info" id="fileInfo">
                    <h3>üìê Extracted Information:</h3>
                    <div style="margin-top: 15px;">
                        <div class="detail-row">
                            <span>Width:</span>
                            <strong id="extractedWidth">-</strong>
                        </div>
                        <div class="detail-row">
                            <span>Height:</span>
                            <strong id="extractedHeight">-</strong>
                        </div>
                        <div class="detail-row">
                            <span>Shapes:</span>
                            <strong id="extractedShapes">-</strong>
                        </div>
                        <div class="detail-row">
                            <span>Letters:</span>
                            <strong id="extractedLetters">-</strong>
                        </div>
                        <div class="detail-row">
                            <span>Complexity:</span>
                            <strong id="extractedComplexity">-</strong>
                        </div>
                        <div class="detail-row">
                            <span>Estimated Time:</span>
                            <strong id="extractedTime">-</strong>
                        </div>
                    </div>
                </div>
                
                <div class="row" style="margin-top: 20px;">
                    <div class="form-group">
                        <label>Material *</label>
                        <select id="uploadMaterial">
                            <option value="">Select material...</option>
                            <option value="Acrylic">Acrylic</option>
                            <option value="Wood">Wood</option>
                            <option value="Metal">Metal</option>
                            <option value="MDF">MDF</option>
                            <option value="Plywood">Plywood</option>
                            <option value="Foam">Foam</option>
                            <option value="Cardboard">Cardboard</option>
                            <option value="ACP">ACP (Aluminium Composite Panel)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Thickness (mm) *</label>
                        <select id="uploadThickness">
                            <option value="">Select thickness...</option>
                            <option value="1.5">1.5mm</option>
                            <option value="3">3mm</option>
                            <option value="6">6mm</option>
                            <option value="9">9mm</option>
                            <option value="12">12mm</option>
                            <option value="15">15mm</option>
                            <option value="18">18mm</option>
                            <option value="25">25mm</option>
                        </select>
                    </div>
                </div>
                
                <div class="row">
                    <div class="form-group">
                        <label>Cutting Type</label>
                        <select id="uploadCuttingType">
                            <option value="Laser Cutting">Laser Cutting</option>
                            <option value="CNC Router">CNC Router</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Quantity</label>
                        <input type="number" id="uploadQuantity" value="1" min="1">
                    </div>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="uploadRush">
                    <label for="uploadRush" style="margin: 0;">Rush Job (Priority Processing)</label>
                </div>
                
                <button class="btn" id="uploadCalcBtn" onclick="calculateFromUpload()" disabled>Get Price Quote</button>
            </div>
            
            <!-- MANUAL TAB -->
            <div id="manual" class="tab-content">
                <div class="row">
                    <div class="form-group">
                        <label>Material *</label>
                        <select id="material">
                            <option value="">Select material...</option>
                            <option value="Acrylic">Acrylic</option>
                            <option value="Wood">Wood</option>
                            <option value="Metal">Metal</option>
                            <option value="MDF">MDF</option>
                            <option value="Plywood">Plywood</option>
                            <option value="Foam">Foam</option>
                            <option value="Cardboard">Cardboard</option>
                            <option value="ACP">ACP (Aluminium Composite Panel)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Thickness (mm) *</label>
                        <input type="number" id="thickness" placeholder="e.g., 6" step="0.1">
                    </div>
                </div>
                
                <div class="row">
                    <div class="form-group">
                        <label>Width (mm) *</label>
                        <input type="number" id="width" placeholder="e.g., 500">
                    </div>
                    
                    <div class="form-group">
                        <label>Height (mm) *</label>
                        <input type="number" id="height" placeholder="e.g., 300">
                    </div>
                </div>
                
                <div class="row">
                    <div class="form-group">
                        <label>Number of Letters</label>
                        <input type="number" id="letters" value="0" min="0">
                    </div>
                    
                    <div class="form-group">
                        <label>Number of Shapes</label>
                        <input type="number" id="shapes" value="1" min="1">
                    </div>
                </div>
                
                <div class="row">
                    <div class="form-group">
                        <label>Complexity (1-5)</label>
                        <select id="complexity">
                            <option value="1">1 - Very Simple</option>
                            <option value="2">2 - Simple</option>
                            <option value="3" selected>3 - Moderate</option>
                            <option value="4">4 - Complex</option>
                            <option value="5">5 - Very Complex</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Cutting Time (minutes) *</label>
                        <input type="number" id="time" placeholder="e.g., 30" step="0.1">
                    </div>
                </div>
                
                <div class="row">
                    <div class="form-group">
                        <label>Cutting Type</label>
                        <select id="cuttingType">
                            <option value="Laser Cutting">Laser Cutting</option>
                            <option value="CNC Router">CNC Router</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Quantity</label>
                        <input type="number" id="quantity" value="1" min="1">
                    </div>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="details">
                    <label for="details" style="margin: 0;">Has intricate details</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="rush">
                    <label for="rush" style="margin: 0;">Rush Job</label>
                </div>
                
                <button class="btn" onclick="calculatePrice()">Calculate Price</button>
            </div>
        </div>
       
        <!-- QUOTES TAB -->
            <div id="quotes" class="tab-content" style="padding: 20px;">
                <div class="row" style="margin-bottom: 20px;">
                    <div class="form-group">
                        <label>Search Quotes</label>
                        <input type="text" id="searchQuotes" placeholder="Search by customer name or quote number..." onkeyup="searchQuotes()">
                    </div>
                </div>
                
                <div id="quotesLoading" class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 15px;">Loading quotes...</p>
                </div>
                
                <div id="quotesContainer">
                    <p style="text-align: center; color: #999;">No quotes saved yet. Create a quote to get started!</p>
                </div>
            </div>
        
        <!-- RESULT BOX -->
        <div class="result-box" id="resultBox">
            <h2 style="text-align: center;">Price Quote</h2>
            <div class="price" id="priceDisplay">‚Ç¶0.00</div>
            
            <div class="details">
                <h3 style="margin-bottom: 15px;">Job Details:</h3>
                <div class="detail-row">
                    <span>Material:</span>
                    <strong id="resultMaterial">-</strong>
                </div>
                <div class="detail-row">
                    <span>Size:</span>
                    <strong id="resultSize">-</strong>
                </div>
                <div class="detail-row">
                    <span>Complexity:</span>
                    <strong id="resultComplexity">-</strong>
                </div>
                <div class="detail-row">
                    <span>Cutting Type:</span>
                    <strong id="resultCutting">-</strong>
                </div>
                <div class="detail-row">
                    <span>Quantity:</span>
                    <strong id="resultQuantity">-</strong>
                </div>
                <div class="detail-row">
                    <span>Estimated Time:</span>
                    <strong id="resultTime">-</strong>
                </div>
            </div>
            
            <!-- Customer Info Form (Hidden by default) -->
            <div id="customerForm" style="display: none; margin-top: 20px;">
                <div style="background: rgba(255,255,255,0.3); padding: 20px; border-radius: 10px;">
                    <h3 style="margin-bottom: 15px;">üíæ Save This Quote</h3>
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="customerName" placeholder="Customer Name (Optional)" style="width: 100%; padding: 10px; border: none; border-radius: 5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <input type="email" id="customerEmail" placeholder="Customer Email (Optional)" style="width: 100%; padding: 10px; border: none; border-radius: 5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <input type="tel" id="customerPhone" placeholder="Customer Phone (Optional)" style="width: 100%; padding: 10px; border: none; border-radius: 5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <textarea id="quoteNotes" placeholder="Notes (Optional)" style="width: 100%; padding: 10px; border: none; border-radius: 5px; min-height: 60px;"></textarea>
                    </div>
                    <button onclick="saveCurrentQuote()" style="background: white; color: #667eea; padding: 12px 30px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; width: 100%;">
                        üíæ Save Quote
                    </button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button onclick="toggleCustomerForm()" id="saveQuoteBtn" style="background: rgba(255,255,255,0.3); color: white; padding: 12px 30px; border: 2px solid white; border-radius: 8px; font-weight: 600; cursor: pointer;">
                    üíæ Save This Quote
                </button>
            </div>

            <div style="text-align: center; margin-top: 15px; opacity: 0.8;">
                <small>Price generated by AI-powered pricing system</small>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>